<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>Raja Rani</title>
    
    <meta name="description" content="Royal mystery game of strategy and chance.">
    <meta name="theme-color" content="#020617">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Raja Rani">
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@800&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body id="mainBody" class="bg-slate-950 text-slate-200 overflow-hidden h-screen">

    <audio id="sndReveal" src="sound/reveal.mp3" preload="auto"></audio>
    <audio id="sndSiren" src="sound/siren.mp3" loop preload="auto"></audio>
    <audio id="sndWin" src="sound/win.mp3" preload="auto"></audio>
    <audio id="sndFail" src="sound/fail.mp3" preload="auto"></audio>

    <nav class="fixed top-0 left-0 right-0 z-[5000] h-24 flex items-center justify-between px-6 pt-4">
        <div class="w-12">
            <button id="matchScoreBtn" onclick="openLedger()" class="bg-yellow-500 text-black w-10 h-10 rounded-full hidden items-center justify-center shadow-xl active:scale-90 transition-all z-[6000]">üèÜ</button>
        </div>

        <div id="roundIndicator" class="hidden bg-slate-900/90 backdrop-blur-md px-6 py-2 rounded-full border border-slate-700 text-[10px] font-black text-yellow-500 uppercase tracking-widest items-center">
            ROUND <span id="curRnd" class="mx-1">1</span> / <span id="totalRnd" class="mx-1">5</span>
        </div>

        <div class="w-12 flex justify-end">
            <button onclick="toggleSettings()" class="bg-slate-800/95 text-yellow-500 w-12 h-12 rounded-full flex items-center justify-center border border-slate-600 shadow-2xl">‚öôÔ∏è</button>
        </div>
    </nav>

    <main class="h-full w-full flex items-center justify-center p-6">
        <div class="glass-card w-full max-w-md relative">
            
            <div id="roundSetup" class="screen-fade space-y-8 text-center">
                <h1 class="text-5xl font-royal text-yellow-500 tracking-tighter uppercase">Raja Rani</h1>
                <div class="bg-slate-950/60 p-8 rounded-[3.5rem] border border-slate-800">
                    <p class="text-[10px] text-slate-500 uppercase font-black mb-2 tracking-widest">Total Rounds</p>
                    <input id="roundInput" type="number" inputmode="numeric" value="5" class="bg-transparent text-7xl text-yellow-500 font-black w-full text-center outline-none" />
                </div>
                <button onclick="confirmRounds()" class="w-full bg-yellow-500 text-black font-black py-6 rounded-3xl uppercase active:scale-95 transition-all">Set Game ‚öîÔ∏è</button>
            </div>

            <div id="setup" class="hidden space-y-6 screen-fade">

                <div class="text-center mb-2">
                  <h2 class="text-3xl font-royal text-white tracking-widest uppercase">Lobby</h2>
                    <p class="text-[10px] text-yellow-500 font-black tracking-[0.3em] mt-1">PLAYERS ASSEMBLY</p>
                </div>

                <div class="ticker-mask relative overflow-hidden py-3 bg-slate-900/40 rounded-3xl border border-white/5">
                    <div class="animate-marquee">
                        <div class="flex items-center gap-2 px-6 border-r border-white/10"><span class="text-xl">üëë</span> <span class="text-[10px] font-black uppercase">Raja <span class="text-yellow-500">1000</span></span></div>
                        <div class="flex items-center gap-2 px-6 border-r border-white/10"><span class="text-xl">üë∏</span> <span class="text-[10px] font-black uppercase">Rani <span class="text-yellow-500">500</span></span></div>
                        <div class="flex items-center gap-2 px-6 border-r border-white/10"><span class="text-xl">üëÆ</span> <span class="text-[10px] font-black uppercase">Police <span class="text-yellow-500">250</span></span></div>
                        <div class="flex items-center gap-2 px-6 border-r border-white/10"><span class="text-xl">üë§</span> <span class="text-[10px] font-black uppercase">Thief <span class="text-yellow-500">250</span></span></div>
                    </div>
                </div>
                <div class="space-y-3">
                    <input id="playerName" placeholder="NAME" class="w-full p-5 rounded-2xl bg-slate-950 border border-slate-800 text-center font-bold text-white uppercase outline-none" />
                    <input id="playerPass" type="password" inputmode="numeric" maxlength="2" placeholder="PIN" class="w-full p-5 rounded-2xl bg-slate-950 border border-slate-800 text-center tracking-[1em] outline-none" />
                    <button onclick="addPlayer()" class="w-full bg-slate-800/50 py-4 rounded-2xl font-black text-[10px] uppercase border border-slate-700">Add Player</button>
                
                <button id="startBtn" onclick="startGame()" class="w-full bg-yellow-500 text-black py-6 rounded-[2.5rem] font-black text-xl hidden animate-pulse uppercase">Start Game ‚öîÔ∏è</button>
          </div>
                <div class="flex justify-between items-center px-2">
                  <span class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Players Joined</span>
                    <span id="playerCount" class="text-[10px] font-black text-yellow-500 bg-yellow-500/10 px-2 py-1 rounded-md">0</span>
                </div>
                <div id="playerList" class="space-y-2 max-h-40 overflow-y-auto no-scrollbar"></div>
            </div>

            <div id="passwordScreen" class="hidden text-center space-y-8 screen-fade">
                <h2 id="turnIndicator" class="text-3xl font-royal text-white uppercase"></h2>
                <div id="pinEntryArea" class="space-y-6 bg-black/40 p-6 rounded-[3.5rem] border border-white/5">
                    <input id="checkPass" type="password" inputmode="numeric" maxlength="2" placeholder="‚Ä¢‚Ä¢" class="w-32 p-6 text-center text-6xl font-black rounded-[2rem] bg-black border-2 border-slate-800 text-yellow-500 outline-none block mx-auto" />
                    <button onclick="checkPassword()" class="bg-yellow-500 text-black font-black py-6 rounded-3xl w-full uppercase">Unlock</button>
                </div>
                <div id="roleDisplayArea" class="hidden flex flex-col items-center">
                    <div id="roleShow" class="w-full bg-slate-950 min-h-[200px] p-10 rounded-[4rem] border-2 border-yellow-500/30 flex flex-col justify-center items-center shadow-inner"></div>
                    <button onclick="hideRole()" class="bg-slate-800 text-white font-black py-5 rounded-2xl w-full mt-8 uppercase">Hide Role</button>
                </div>
                <div id="passPhoneArea" class="hidden py-4">
                    <button onclick="nextPlayer()" class="bg-blue-600 text-white font-black py-6 rounded-3xl w-full uppercase">Next Player</button>
                </div>
            </div>

            <div id="policeScreen" class="hidden space-y-6 screen-fade">
                <div class="text-center">
                    <p class="text-[10px] text-blue-400 font-black uppercase tracking-widest">Kavalan</p>
                    <h2 id="policeName" class="text-4xl font-royal text-white uppercase"></h2>
                </div>
                <div id="timerDisplay" class="text-center text-7xl font-mono font-black text-yellow-500 bg-slate-950 py-6 rounded-[3rem] border border-white/5">30</div>
                <div id="suspectContainer" class="space-y-3 max-h-52 overflow-y-auto no-scrollbar"></div>
                <button id="arrestBtn" onclick="submitGuess(false)" class="bg-slate-800 opacity-30 pointer-events-none py-6 rounded-3xl w-full font-black uppercase text-white transition-all">Catch üöì</button>
            </div>

            <div id="celebrationScreen" class="hidden space-y-6 screen-fade text-center">
                <h2 class="text-4xl font-royal text-yellow-500 uppercase">Rankings</h2>
                <div id="podium" class="w-full text-left space-y-3 overflow-y-auto max-h-[50vh] no-scrollbar"></div>
        
          <div class="space-y-3 pt-4">
            <div class="grid grid-cols-2 gap-3">
            <button onclick="continueGame()" class="py-4 bg-blue-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-lg active:scale-95 transition-all">
                Continue
            </button>
            <button onclick="shareGame()" class="py-4 bg-slate-800 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest border border-slate-700 active:scale-95 transition-all">
                Share
            </button>
        </div>
        <button onclick="fullReset()" class="w-full py-5 bg-white text-black rounded-[2rem] font-black uppercase shadow-xl active:scale-95 transition-all">
            New Game
        </button>
    </div>
            </div>
        </div>
    </main>

    <div id="verdictOverlay" class="hidden fixed inset-0 z-[6000] flex items-center justify-center p-8 backdrop-blur-3xl bg-slate-950/90">
        <div class="w-full max-w-sm glass-card p-10 text-center border-2 border-white/10">
            <div id="verdictIcon" class="text-8xl mb-6"></div>
            <h2 id="verdictTitle" class="text-4xl font-royal mb-4 text-white uppercase"></h2>
            <p id="verdictDesc" class="text-slate-400 text-[10px] uppercase mb-10 font-black tracking-widest"></p>
            <button onclick="closeVerdict()" class="w-full bg-white text-black font-black py-6 rounded-3xl uppercase">Next Round</button>
        </div>
    </div>

    <div id="ledgerModal" class="hidden fixed inset-0 z-[9500] bg-slate-950/98 flex items-center justify-center p-6 backdrop-blur-xl">
        <div class="w-full max-w-sm glass-card flex flex-col max-h-[85vh]">
            <h2 class="text-2xl font-royal text-yellow-500 mb-6 text-center">SCOREBOARD</h2>
            <div id="ledgerContent" class="flex-1 overflow-y-auto no-scrollbar space-y-4"></div>
            <div class="flex flex-col gap-2 mt-6">
                <button onclick="closeLedger()" class="w-full py-4 bg-white text-black rounded-2xl font-black uppercase">Resume</button>
                <button onclick="quitToLobby()" class="w-full py-3 bg-red-950/30 text-red-500 border border-red-900/20 rounded-2xl font-bold text-[10px] uppercase">Quit Game</button>
            </div>
        </div>
    </div>

    <div id="settingsModal" class="hidden fixed inset-0 z-[8000] bg-slate-950/95 flex items-center justify-center p-6 backdrop-blur-2xl">
        <div class="w-full max-w-sm glass-card space-y-5 border border-white/10">
            <h2 class="text-2xl font-royal text-yellow-500 text-center">SETTINGS</h2>
            <div class="p-5 bg-slate-900 rounded-3xl border border-slate-800 flex items-center justify-between">
                <button onclick="adjRnd(-1)" class="w-12 h-12 bg-slate-800 rounded-xl text-xl font-bold border border-slate-700">-</button>
                <div class="text-center"><span class="text-[10px] uppercase block text-slate-500 font-black">Rounds</span><span id="setRndDisp" class="text-3xl font-black text-yellow-500">5</span></div>
                <button onclick="adjRnd(1)" class="w-12 h-12 bg-slate-800 rounded-xl text-xl font-bold border border-slate-700">+</button>
            </div>
<div class="p-5 bg-slate-900 rounded-3xl border border-slate-800 flex items-center justify-between">
    <button onclick="jumpTimer(-30)" class="w-12 h-12 bg-slate-800 rounded-xl text-xl font-bold border border-slate-700 active:scale-90 transition-all">-</button>
    
    <div class="text-center">
        <span class="text-[10px] uppercase block text-slate-500 font-black mb-1">Search Time</span>
        <div class="flex items-end justify-center">
            <span id="setTimerDisp" class="text-3xl font-black text-yellow-500">30</span>
            <span class="text-xs text-yellow-500 font-bold ml-1 mb-1">s</span>
        </div>
    </div>
    
    <button onclick="jumpTimer(30)" class="w-12 h-12 bg-slate-800 rounded-xl text-xl font-bold border border-slate-700 active:scale-90 transition-all">+</button>
</div>
            <button onclick="toggleSound()" class="w-full p-5 bg-green-600 text-white rounded-3xl font-black uppercase text-xs flex justify-between items-center"><span>AUDIO</span> <span id="soundStatusLabel">ON üîä</span></button>
            <button onclick="resetScoresOnly()" class="w-full p-4 bg-orange-600/10 border border-orange-600/30 text-orange-500 rounded-3xl font-black uppercase text-[10px]">Reset Scores</button>
            <button onclick="fullReset()" class="w-full p-4 bg-red-950/40 border border-red-900/30 text-red-500 rounded-3xl font-black uppercase text-[10px]">Wipe Data</button>
            <button onclick="toggleSettings()" class="mt-4 w-full py-5 bg-white text-black rounded-3xl font-black uppercase">Close</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
